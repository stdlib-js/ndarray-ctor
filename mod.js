// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./mod.d.ts" />
var t="function"==typeof Object.defineProperty?Object.defineProperty:null;var e,r=Object.defineProperty,n=Object.prototype,i=n.toString,o=n.__defineGetter__,u=n.__defineSetter__,a=n.__lookupGetter__,f=n.__lookupSetter__;e=function(){try{return t({},"x",{}),!0}catch(t){return!1}}()?r:function(t,e,r){var s,c,l,h;if("object"!=typeof t||null===t||"[object Array]"===i.call(t))throw new TypeError("invalid argument. First argument must be an object. Value: `"+t+"`.");if("object"!=typeof r||null===r||"[object Array]"===i.call(r))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if((c="value"in r)&&(a.call(t,e)||f.call(t,e)?(s=t.__proto__,t.__proto__=n,delete t[e],t[e]=r.value,t.__proto__=s):t[e]=r.value),l="get"in r,h="set"in r,c&&(l||h))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return l&&o&&o.call(t,e,r.get),h&&u&&u.call(t,e,r.set),t};var s=e;function c(t,e,r){s(t,e,{configurable:!1,enumerable:!1,writable:!1,value:r})}var l=Math.floor;function h(t){return l(t)===t}function p(t){return"object"==typeof t&&null!==t&&"number"==typeof t.length&&h(t.length)&&t.length>=0&&t.length<=9007199254740991}function y(t){return"number"==typeof t}var d="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function g(){return d&&"symbol"==typeof Symbol.toStringTag}var m=Object.prototype.toString;var _=Object.prototype.hasOwnProperty;function b(t,e){return null!=t&&_.call(t,e)}var v="function"==typeof Symbol?Symbol.toStringTag:"";var w=g()?function(t){var e,r,n;if(null==t)return m.call(t);r=t[v],e=b(t,v);try{t[v]=void 0}catch(e){return m.call(t)}return n=m.call(t),e?t[v]=r:delete t[v],n}:function(t){return m.call(t)},O=Number,E=O.prototype.toString;var j=g();function A(t){return"object"==typeof t&&(t instanceof O||(j?function(t){try{return E.call(t),!0}catch(t){return!1}}(t):"[object Number]"===w(t)))}function I(t){return y(t)||A(t)}c(I,"isPrimitive",y),c(I,"isObject",A);var T=Number.POSITIVE_INFINITY,U=O.NEGATIVE_INFINITY;function S(t){return t<T&&t>U&&h(t)}function N(t){return y(t)&&S(t)}function x(t){return A(t)&&S(t.valueOf())}function R(t){return N(t)||x(t)}function V(t){return N(t)&&t>=0}function M(t){return x(t)&&t.valueOf()>=0}function B(t){return V(t)||M(t)}c(R,"isPrimitive",N),c(R,"isObject",x),c(B,"isPrimitive",V),c(B,"isObject",M);function L(t){if("function"!=typeof t)throw new TypeError("invalid argument. Must provide a function. Value: `"+t+"`.");return function(e){var r,n;if(!function(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length&&h(t.length)&&t.length>=0&&t.length<=4294967295}(e))return!1;if(0===(r=e.length))return!1;for(n=0;n<r;n++)if(!1===t(e[n]))return!1;return!0}}var F=L(B.isPrimitive),P=L(B.isObject),C=L(B);c(C,"primitives",F),c(C,"objects",P);var D=L(R.isPrimitive),Y=L(R.isObject),G=L(R);c(G,"primitives",D),c(G,"objects",Y);var k=/./;function J(t){return"boolean"==typeof t}var W=Boolean.prototype.toString;var X=g();function $(t){return"object"==typeof t&&(t instanceof Boolean||(X?function(t){try{return W.call(t),!0}catch(t){return!1}}(t):"[object Boolean]"===w(t)))}function q(t){return J(t)||$(t)}function z(){return new Function("return this;")()}c(q,"isPrimitive",J),c(q,"isObject",$);var H="object"==typeof self?self:null,K="object"==typeof window?window:null,Q="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Z="object"==typeof Q?Q:null;function tt(t){if(arguments.length){if(!J(t))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+t+"`.");if(t)return z()}if(H)return H;if(K)return K;if(Z)return Z;throw new Error("unexpected error. Unable to resolve global object.")}var et=tt(),rt=et.document&&et.document.childNodes,nt=Int8Array;function it(){return/^\s*function\s*([^(]*)/i}var ot=/^\s*function\s*([^(]*)/i;c(it,"REGEXP",ot);var ut=Array.isArray?Array.isArray:function(t){return"[object Array]"===w(t)};function at(t){return null!==t&&"object"==typeof t}var ft=function(t){if("function"!=typeof t)throw new TypeError("invalid argument. Must provide a function. Value: `"+t+"`.");return function(e){var r,n;if(!ut(e))return!1;if(0===(r=e.length))return!1;for(n=0;n<r;n++)if(!1===t(e[n]))return!1;return!0}}(at);function st(t){var e,r,n,i;if(("Object"===(r=w(t).slice(8,-1))||"Error"===r)&&t.constructor){if("string"==typeof(n=t.constructor).name)return n.name;if(e=ot.exec(n.toString()))return e[1]}return at(i=t)&&(i._isBuffer||i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i))?"Buffer":r}c(at,"isObjectLikeArray",ft);var ct="function"==typeof k||"object"==typeof nt||"function"==typeof rt?function(t){return st(t).toLowerCase()}:function(t){var e;return null===t?"null":"object"===(e=typeof t)?st(t).toLowerCase():e};function lt(t){return"function"===ct(t)}var ht=["row-major","column-major"];function pt(){return ht.slice()}function yt(){return{"row-major":1,"column-major":2}}c(pt,"enum",yt);var dt=pt(),gt=dt.length;function mt(t){var e;for(e=0;e<gt;e++)if(t===dt[e])return!0;return!1}var _t=["binary","complex64","complex128","float32","float64","generic","int16","int32","int8","uint16","uint32","uint8","uint8c"];function bt(){return _t.slice()}function vt(){return{bool:0,int8:1,uint8:2,uint8c:3,int16:4,uint16:5,int32:6,uint32:7,int64:8,uint64:9,float32:10,float64:11,complex64:12,complex128:13,binary:14,generic:15,notype:17,userdefined_type:256}}function wt(t,e,r){s(t,e,{configurable:!1,enumerable:!0,writable:!1,value:r})}function Ot(t){return Object.keys(Object(t))}var Et=void 0!==Object.keys;function jt(t){return"[object Arguments]"===w(t)}var At=function(){return jt(arguments)}();function It(t){return"string"==typeof t}var Tt=String.prototype.valueOf;var Ut=g();function St(t){return"object"==typeof t&&(t instanceof String||(Ut?function(t){try{return Tt.call(t),!0}catch(t){return!1}}(t):"[object String]"===w(t)))}function Nt(t){return It(t)||St(t)}function xt(t){return t!=t}function Rt(t){return y(t)&&xt(t)}function Vt(t){return A(t)&&xt(t.valueOf())}function Mt(t){return Rt(t)||Vt(t)}c(Nt,"isPrimitive",It),c(Nt,"isObject",St),c(Mt,"isPrimitive",Rt),c(Mt,"isObject",Vt);var Bt=Object.prototype.propertyIsEnumerable;var Lt=!Bt.call("beep","0");function Ft(t,e){var r;return null!=t&&(!(r=Bt.call(t,e))&&Lt&&Nt(t)?!Rt(e=+e)&&N(e)&&e>=0&&e<t.length:r)}var Pt=At?jt:function(t){return null!==t&&"object"==typeof t&&!ut(t)&&"number"==typeof t.length&&h(t.length)&&t.length>=0&&t.length<=4294967295&&b(t,"callee")&&!Ft(t,"callee")},Ct=Array.prototype.slice;var Dt=Ft((function(){}),"prototype"),Yt=!Ft({toString:null},"toString");function Gt(t,e,r){var n,i;if(!p(t)&&!It(t))throw new TypeError("invalid argument. First argument must be an array-like object. Value: `"+t+"`.");if(0===(n=t.length))return-1;if(3===arguments.length){if(!N(r))throw new TypeError("invalid argument. `fromIndex` must be an integer. Value: `"+r+"`.");if(r>=0){if(r>=n)return-1;i=r}else(i=n+r)<0&&(i=0)}else i=0;if(Mt(e)){for(;i<n;i++)if(Mt(t[i]))return i}else for(;i<n;i++)if(t[i]===e)return i;return-1}function kt(t){return t.constructor&&t.constructor.prototype===t}var Jt=["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"],Wt="undefined"==typeof window?void 0:window;var Xt=function(){var t;if("undefined"===ct(Wt))return!1;for(t in Wt)try{-1===Gt(Jt,t)&&b(Wt,t)&&null!==Wt[t]&&"object"===ct(Wt[t])&&kt(Wt[t])}catch(t){return!0}return!1}(),$t="undefined"!=typeof window;var qt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var zt=Et?function(){return 2!==(Ot(arguments)||"").length}(1,2)?function(t){return Pt(t)?Ot(Ct.call(t)):Ot(t)}:Ot:function(t){var e,r,n,i,o,u,a;if(i=[],Pt(t)){for(a=0;a<t.length;a++)i.push(a.toString());return i}if("string"==typeof t){if(t.length>0&&!b(t,"0"))for(a=0;a<t.length;a++)i.push(a.toString())}else{if(!1==(n="function"==typeof t)&&!at(t))return i;r=Dt&&n}for(o in t)r&&"prototype"===o||!b(t,o)||i.push(String(o));if(Yt)for(e=function(t){if(!1===$t&&!Xt)return kt(t);try{return kt(t)}catch(t){return!1}}(t),a=0;a<qt.length;a++)u=qt[a],e&&"constructor"===u||!b(t,u)||i.push(String(u));return i};c(bt,"enum",vt),function(t,e){var r,n,i;for(r=zt(e),i=0;i<r.length;i++)wt(t,n=r[i],e[n])}(bt,{bool:0,int8:1,uint8:2,uint8c:3,int16:4,uint16:5,int32:6,uint32:7,int64:8,uint64:9,float32:10,float64:11,complex64:12,complex128:13,binary:14,generic:15,notype:17,userdefined_type:256});var Ht=bt(),Kt=Ht.length;function Qt(t){var e;for(e=0;e<Kt;e++)if(t===Ht[e])return!0;return!1}function Zt(t,e,r){var n,i,o,u,a;for(n=t.length,i=r,o=r,a=0;a<n;a++){if(0===t[a])return[r,r];(u=e[a])>0?o+=u*(t[a]-1):u<0&&(i+=u*(t[a]-1))}return[i,o]}function te(t,e,r,n){var i=Zt(e,r,n);return i[0]>=0&&i[1]<t}function ee(t){var e,r,n;if(0===(e=t.length))return 0;for(r=1,n=0;n<e;n++)r*=t[n];return r}c(Zt,"assign",(function(t,e,r,n){var i,o,u,a,f;for(i=t.length,o=r,u=r,f=0;f<i;f++){if(0===t[f])return n[0]=r,n[1]=r,n;(a=e[f])>0?u+=a*(t[f]-1):a<0&&(o+=a*(t[f]-1))}return n[0]=o,n[1]=u,n}));var re=tt();function ne(t,e,r){s(t,e,{configurable:!1,enumerable:!1,get:r})}var ie={binary:1,bool:1,complex64:8,complex128:16,float16:2,bfloat16:2,float32:4,float64:8,float128:16,generic:null,int8:1,int16:2,int32:4,int64:8,int128:16,int256:32,uint8:1,uint8c:1,uint16:2,uint32:4,uint64:8,uint128:16,uint256:32};function oe(t){return Math.abs(t)}function ue(t,e){return e&&(2===t||3===t)}function ae(t,e){return e&&(1===t||3===t)}function fe(t){return t.re}function se(t){return t.im}var ce=/[-\/\\^$*+?.()|[\]{}]/g;var le=RegExp.prototype.exec;var he=g();function pe(t){return"object"==typeof t&&(t instanceof RegExp||(he?function(t){try{return le.call(t),!0}catch(t){return!1}}(t):"[object RegExp]"===w(t)))}function ye(t,e,r){if(!It(t))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+t+"`.");if(It(e))e=function(t){var e,r;if(!It(t))throw new TypeError("invalid argument. Must provide a regular expression string. Value: `"+t+"`.");if("/"===t[0])for(r=t.length-1;r>=0&&"/"!==t[r];r--);return void 0===r||r<=0?t.replace(ce,"\\$&"):(e=(e=t.substring(1,r)).replace(ce,"\\$&"),t=t[0]+e+t.substring(r))}(e),e=new RegExp(e,"g");else if(!pe(e))throw new TypeError("invalid argument. Second argument must be a string primitive or regular expression. Value: `"+e+"`.");if(!It(r)&&!lt(r))throw new TypeError("invalid argument. Third argument must be a string primitive or replacement function. Value: `"+r+"`.");return t.replace(e,r)}var de={int8:"new Int8Array( [ {{data}} ] )",uint8:"new Uint8Array( [ {{data}} ] )",uint8c:"new Uint8ClampedArray( [ {{data}} ] )",int16:"new Int16Array( [ {{data}} ] )",uint16:"new Uint16Array( [ {{data}} ] )",int32:"new Int32Array( [ {{data}} ] )",uint32:"new Uint32Array( [ {{data}} ] )",float32:"new Float32Array( [ {{data}} ] )",float64:"new Float64Array( [ {{data}} ] )",generic:"[ {{data}} ]",binary:"new Buffer( [ {{data}} ] )",complex64:"new Complex64Array( [ {{data}} ] )",complex128:"new Complex128Array( [ {{data}} ] )"};var ge="function"==typeof Uint8Array;var me="function"==typeof Uint8Array?Uint8Array:null;var _e,be="function"==typeof Uint8Array?Uint8Array:void 0;_e=function(){var t,e,r;if("function"!=typeof me)return!1;try{e=new me(e=[1,3.14,-3.14,256,257]),r=e,t=(ge&&r instanceof Uint8Array||"[object Uint8Array]"===w(r))&&1===e[0]&&3===e[1]&&253===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?be:function(){throw new Error("not implemented")};var ve=_e,we="function"==typeof Uint16Array;var Oe="function"==typeof Uint16Array?Uint16Array:null;var Ee,je="function"==typeof Uint16Array?Uint16Array:void 0;Ee=function(){var t,e,r;if("function"!=typeof Oe)return!1;try{e=new Oe(e=[1,3.14,-3.14,65536,65537]),r=e,t=(we&&r instanceof Uint16Array||"[object Uint16Array]"===w(r))&&1===e[0]&&3===e[1]&&65533===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?je:function(){throw new Error("not implemented")};var Ae,Ie={uint16:Ee,uint8:ve};(Ae=new Ie.uint16(1))[0]=4660;var Te=52===new Ie.uint8(Ae.buffer)[0],Ue="function"==typeof ArrayBuffer;var Se="function"==typeof Float64Array;var Ne="function"==typeof Float64Array?Float64Array:null;var xe,Re="function"==typeof Float64Array?Float64Array:void 0;xe=function(){var t,e,r;if("function"!=typeof Ne)return!1;try{e=new Ne([1,3.14,-3.14,NaN]),r=e,t=(Se&&r instanceof Float64Array||"[object Float64Array]"===w(r))&&1===e[0]&&3.14===e[1]&&-3.14===e[2]&&e[3]!=e[3]}catch(e){t=!1}return t}()?Re:function(){throw new Error("not implemented")};var Ve=xe,Me="function"==typeof ArrayBuffer?ArrayBuffer:null;var Be,Le="function"==typeof ArrayBuffer?ArrayBuffer:void 0;Be=function(){var t,e,r,n;if("function"!=typeof Me)return!1;try{r=new Me(16),n=r,(t=(Ue&&n instanceof ArrayBuffer||"[object ArrayBuffer]"===w(n))&&"function"==typeof Me.isView)&&((e=new Ve(r))[0]=-3.14,e[1]=NaN,t=t&&Me.isView(e)&&16===r.byteLength&&-3.14===e[0]&&e[1]!=e[1])}catch(e){t=!1}return t}()?Le:function(){throw new Error("not implemented")};var Fe=Be,Pe="function"==typeof DataView;var Ce="function"==typeof DataView?DataView:null;var De,Ye="function"==typeof DataView?DataView:void 0;De=function(){var t,e,r,n;if("function"!=typeof Ce)return!1;try{r=new Fe(24),e=new Ce(r,8),n=e,(t=(Pe&&n instanceof DataView||"[object DataView]"===w(n))&&"function"==typeof e.getFloat64&&"function"==typeof e.setFloat64)&&(e.setFloat64(0,-3.14),e.setFloat64(8,NaN),t=t&&e.buffer===r&&16===e.byteLength&&8===e.byteOffset&&-3.14===e.getFloat64(0)&&e.getFloat64(8)!=e.getFloat64(8))}catch(e){t=!1}return t}()?Ye:function(){throw new Error("not implemented")};var Ge=De,ke="function"==typeof BigInt?BigInt:void 0,Je=["throw","clamp","wrap"];function We(){return Je.slice()}function Xe(){return{throw:1,clamp:2,wrap:3}}c(We,"enum",Xe);var $e={bool:0,int8:1,uint8:2,uint8c:3,int16:4,uint16:5,int32:6,uint32:7,int64:8,uint64:9,float32:10,float64:11,complex64:12,complex128:13,binary:14,generic:15,notype:17,userdefined_type:256},qe={"row-major":1,"column-major":2},ze={throw:1,clamp:2,wrap:3};var He=new ve(8),Ke=new Ge(He.buffer);function Qe(t,e,r,n){var i,o,u;if(0===t){for(u=0;u<He.length;u++)e[n]=0,n+=r;return e}for(o=(4294967295&t)>>>0,i=l(t/4294967296),Te?(Ke.setUint32(0,o,Te),Ke.setUint32(4,i,Te)):(Ke.setUint32(0,i,Te),Ke.setUint32(4,o,Te)),u=0;u<He.length;u++)e[n]=He[u],n+=r;return e}c((function(t){var e,r,n,i;return e=new ve(8),0===t||(i=(4294967295&t)>>>0,n=l(t/4294967296),r=new Ge(e.buffer),Te?(r.setUint32(0,i,Te),r.setUint32(4,n,Te)):(r.setUint32(0,n,Te),r.setUint32(4,i,Te))),e}),"assign",Qe);var Ze={bool:0,int8:1,uint8:2,uint8c:3,int16:4,uint16:5,int32:6,uint32:7,int64:8,uint64:9,float32:10,float64:11,complex64:12,complex128:13,binary:14,generic:15,notype:17,userdefined_type:256},tr={"row-major":1,"column-major":2},er={throw:1,clamp:2,wrap:3};function rr(t,e,r,n,i,o){var u,a,f,s,c;if(!(this instanceof rr))return new rr(t,e,r,n,i,o);for(s=1,c=0;c<r.length;c++)s*=r[c];return a=e.BYTES_PER_ELEMENT?e.BYTES_PER_ELEMENT*s:null,this._byteLength=a,this._bytesPerElement=function(t){return ie[t]||null}(t),this._buffer=e,this._dtype=t,this._length=s,this._ndims=r.length,this._offset=i,this._order=o,this._shape=r,this._strides=n,this._accessors=Boolean(e.get&&e.set),this._iterationOrder=function(t){var e,r;for(e=0,r=0;r<t.length;r++)t[r]<0&&(e+=1);return 0===e?1:e===t.length?-1:0}(n),u=function(t,e,r,n,i){var o;return 0!==t&&0!==i&&t===(o=Zt(e,r,n))[1]-o[0]+1}(s,r,n,i,this._iterationOrder),f=function(t){var e,r,n,i,o,u;if(0===(r=t.length))return 0;for(e=!0,n=!0,i=oe(t[0]),u=1;u<r;u++){if(o=oe(t[u]),e&&o<i?e=!1:n&&o>i&&(n=!1),!n&&!e)return 0;i=o}return n&&e?3:n?1:2}(n),this._flags={ROW_MAJOR_CONTIGUOUS:ae(f,u),COLUMN_MAJOR_CONTIGUOUS:ue(f,u),READONLY:!1},this.__meta_dataview__=null,this}function nr(t){var e=typeof t;return null===t||"object"!==e&&"function"!==e?new TypeError("invalid argument. A provided constructor must be either an object (except null) or a function. Value: `"+t+"`."):null}c(rr,"name","ndarray"),ne(rr.prototype,"byteLength",(function(){return this._byteLength})),ne(rr.prototype,"BYTES_PER_ELEMENT",(function(){return this._bytesPerElement})),ne(rr.prototype,"data",(function(){return this._buffer})),ne(rr.prototype,"dtype",(function(){return this._dtype})),ne(rr.prototype,"flags",(function(){return{ROW_MAJOR_CONTIGUOUS:(t=this._flags).ROW_MAJOR_CONTIGUOUS,COLUMN_MAJOR_CONTIGUOUS:t.COLUMN_MAJOR_CONTIGUOUS,READONLY:t.READONLY};var t})),ne(rr.prototype,"length",(function(){return this._length})),ne(rr.prototype,"ndims",(function(){return this._ndims})),ne(rr.prototype,"offset",(function(){return this._offset})),ne(rr.prototype,"order",(function(){return this._order})),ne(rr.prototype,"shape",(function(){return this._shape.slice()})),ne(rr.prototype,"strides",(function(){return this._strides.slice()})),c(rr.prototype,"get",(function(){var t,e;for(t=this._offset,e=0;e<arguments.length;e++)t+=this._strides[e]*arguments[e];return this._accessors?this._buffer.get(t):this._buffer[t]})),c(rr.prototype,"iget",(function(t){var e,r,n,i,o,u;if(0===(n=this._ndims))return this._accessors?this._buffer.get(this._offset):this._buffer[this._offset];if(this._flags.ROW_MAJOR_CONTIGUOUS||this._flags.COLUMN_MAJOR_CONTIGUOUS){if(1===this._iterationOrder)return this._accessors?this._buffer.get(this._offset+t):this._buffer[this._offset+t];if(-1===this._iterationOrder)return this._accessors?this._buffer.get(this.offset-t):this._buffer[this._offset-t]}if(r=this._shape,e=this._strides,i=this._offset,"column-major"===this._order){for(u=0;u<n;u++)t-=o=t%r[u],t/=r[u],i+=o*e[u];return this._accessors?this._buffer.get(i):this._buffer[i]}for(u=n-1;u>=0;u--)t-=o=t%r[u],t/=r[u],i+=o*e[u];return this._accessors?this._buffer.get(i):this._buffer[i]})),c(rr.prototype,"set",(function(){var t,e;for(t=this._offset,e=0;e<arguments.length-1;e++)t+=this._strides[e]*arguments[e];return this._accessors?this._buffer.set(arguments[e],t):this._buffer[t]=arguments[e],this})),c(rr.prototype,"iset",(function(t,e){var r,n,i,o,u,a;if(0===(i=this._ndims))return this._accessors?this._buffer.set(t,this._offset):this._buffer[this._offset]=t,this;if(this._flags.ROW_MAJOR_CONTIGUOUS||this._flags.COLUMN_MAJOR_CONTIGUOUS){if(1===this._iterationOrder)return this._accessors?this._buffer.set(e,this._offset+t):this._buffer[this._offset+t]=e,this;if(-1===this._iterationOrder)return this._accessors?this._buffer.set(e,this._offset-t):this._buffer[this._offset-t]=e,this}if(n=this._shape,r=this._strides,o=this._offset,"column-major"===this._order){for(a=0;a<i;a++)t-=u=t%n[a],t/=n[a],o+=u*r[a];return this._accessors?this._buffer.set(e,o):this._buffer[o]=e,this}for(a=i-1;a>=0;a--)t-=u=t%n[a],t/=n[a],o+=u*r[a];return this._accessors?this._buffer.set(e,o):this._buffer[o]=e,this})),c(rr.prototype,"toString",(function(){var t,e,r,n,i,o;if(e=this._shape.length,r="ndarray( '"+(n=this._dtype)+"', ",t="",this._length<=100)if("complex64"===n||"complex128"===n)for(o=0;o<this._length;o++)t+=fe(i=this.iget(o))+", "+se(i),o<this._length-1&&(t+=", ");else for(o=0;o<this._length;o++)t+=this.iget(o),o<this._length-1&&(t+=", ");else{if("complex64"===n||"complex128"===n)for(o=0;o<3;o++)t+=fe(i=this.iget(o))+", "+se(i),o<2&&(t+=", ");else for(o=0;o<3;o++)t+=this.iget(o),o<2&&(t+=", ");if(t+=", ..., ","complex64"===n||"complex128"===n)for(o=2;o>=0;o--)t+=fe(i=this.iget(this._length-1-o))+", "+se(i),o>0&&(t+=", ");else for(o=2;o>=0;o--)t+=this.iget(this._length-1-o),o>0&&(t+=", ")}if(r+=ye(de[this.dtype],"{{data}}",t),r+=", ",r+=0===e?"[]":"[ "+this._shape.join(", ")+" ]",r+=", ",r+="[ ",0===e)r+="0";else for(o=0;o<e;o++)this._strides[o]<0?r+=-this._strides[o]:r+=this._strides[o],o<e-1&&(r+=", ");return r+=" ]",r+=", ",r+="0",r+=", ",r+="'"+this._order+"'",r+=" )"})),c(rr.prototype,"toJSON",(function(){var t,e,r,n;for(e=this._length,(t={}).type="ndarray",t.dtype=this.dtype,t.flags={READONLY:this._flags.READONLY},t.order=this._order,t.shape=this._shape.slice(),t.strides=this._strides.slice(),n=0;n<e;n++)t.strides[n]<0&&(t.strides[n]*=-1);if(t.data=[],"complex64"===t.dtype||"complex128"===t.dtype)for(n=0;n<e;n++)r=this.iget(n),t.data.push(fe(r),se(r));else for(n=0;n<e;n++)t.data.push(this.iget(n));return t})),c(rr.prototype,"__array_meta_dataview__","function"==typeof re.BigInt&&"function"==typeof BigInt&&"bigint"==typeof re.BigInt("1")&&"bigint"==typeof BigInt("1")?function(){var t,e,r,n,i,o,u,a,f,s,c,l,h,p;if(f=this._mode||"throw",u=this._submode||[f],r=33+16*(l=this._ndims)+(h=u.length),(a=this.__meta_dataview__)&&a.byteLength===r)return a;for(a=new Ge(new Fe(r)),i=this._shape,o=this._strides,n=this._dtype,t=this._bytesPerElement,s=0,a.setInt8(s,Te?1:0),s+=1,a.setInt16(s,$e[n],Te),s+=2,a.setBigInt64(s,ke(l),Te),c=8*l,s+=8,p=0;p<l;p++)a.setBigInt64(s,ke(i[p]),Te),a.setBigInt64(s+c,ke(o[p]*t),Te),s+=8;for(s+=c,a.setBigInt64(s,ke(this._offset*t),Te),s+=8,a.setInt8(s,qe[this._order]),s+=1,a.setInt8(s,ze[f]),s+=1,a.setBigInt64(s,ke(h),Te),s+=8,p=0;p<h;p++)a.setInt8(s,ze[u[p]]),s+=1;return e=0,e|=this._flags.READONLY?4:0,a.setInt32(s,e,Te),this.__meta_dataview__=a,a}:function(){var t,e,r,n,i,o,u,a,f,s,c,l,h,p,y;if(s=this._mode||"throw",a=this._submode||[s],n=33+16*(h=this._ndims)+(p=a.length),(f=this.__meta_dataview__)&&f.byteLength===n)return f;for(f=new Ge(new Fe(n)),e=new ve(f.buffer),o=this._shape,u=this._strides,i=this._dtype,t=this._bytesPerElement,c=0,f.setInt8(c,Te?1:0),c+=1,f.setInt16(c,Ze[i],Te),Qe(h,e,1,c+=2),l=8*h,c+=8,y=0;y<h;y++)Qe(o[y],e,1,c),Qe(u[y]*t,e,1,c+l),c+=8;for(c+=l,Qe(this._offset*t,e,1,c),c+=8,f.setInt8(c,tr[this._order]),c+=1,f.setInt8(c,er[s]),Qe(p,e,1,c+=1),c+=8,y=0;y<p;y++)f.setInt8(c,er[a[y]]),c+=1;return r=0,r|=this._flags.READONLY?4:0,f.setInt32(c,r,Te),this.__meta_dataview__=f,f});var ir=Object.create;function or(){}var ur="function"==typeof ir?ir:function(t){return or.prototype=t,new or};function ar(){var t,e=arguments,r=e[0],n="https://stdlib.io/e/"+r+"?";for(t=1;t<e.length;t++)n+="&arg[]="+encodeURIComponent(e[t]);return n}var fr="throw",sr=!1;function cr(t,e,r){if("clamp"===r)return function(t,e){return t<0?0:t>e?e:t}(t,e);if("wrap"===r)return function(t,e){var r=e+1;return t<0?((t+=r)<0&&0!=(t%=r)&&(t+=r),t):t>e?((t-=r)>e&&(t%=r),t):t}(t,e);if(t<0||t>e)throw new RangeError("invalid argument. Index must be on the interval: [0,"+e+"]. Value: `"+t+"`.");return t}var lr=rr.prototype.iget;var hr=rr.prototype.iset;function pr(t,e){var r,n;for(r=[],n=0;n<e;n++)r.push(t[n]);return r}var yr,dr=Object.getPrototypeOf;yr=lt(Object.getPrototypeOf)?dr:function(t){var e=function(t){return t.__proto__}(t);return e||null===e?e:"[object Function]"===w(t.constructor)?t.constructor.prototype:t instanceof Object?Object.prototype:null};var gr=yr;var mr=Object.prototype;function _r(t){var e;return!!function(t){return"object"==typeof t&&null!==t&&!ut(t)}(t)&&(e=function(t){return null==t?null:(t=Object(t),gr(t))}(t),!e||!b(t,"constructor")&&b(e,"constructor")&&lt(e.constructor)&&"[object Function]"===w(e.constructor)&&b(e,"isPrototypeOf")&&lt(e.isPrototypeOf)&&(e===mr||function(t){var e;for(e in t)if(!b(t,e))return!1;return!0}(t)))}var br=We(),vr=br.length;function wr(t){var e;for(e=0;e<vr;e++)if(t===br[e])return!0;return!1}function Or(t,e){var r;if(!_r(e))return new TypeError(ar("0Mp2h",e));if(b(e,"mode")&&(t.mode=e.mode,!wr(t.mode)))return new TypeError(ar("0Mp5o","mode",t.mode));if(b(e,"submode")){if(t.submode=e.submode,!ut(t.submode))return new TypeError(ar("0Mp5p","submode",t.submode));if(0===t.submode.length)return new TypeError(ar("0Mp5p","submode",t.submode.join(",")));for(r=0;r<t.submode.length;r++)if(!wr(t.submode[r]))return new TypeError(ar("invalid option. Each submode must be a recognized mode. Option: `%s`.",t.submode[r]));t.submode=t.submode.slice()}return b(e,"readonly")&&(t.readonly=e.readonly,!J(t.readonly))?new TypeError(ar("0Mp30","readonly",t.readonly)):null}function Er(t,e,r,n,i,o,u){var a,f,s,c,l;if(!(this instanceof Er))return arguments.length<7?new Er(t,e,r,n,i,o):new Er(t,e,r,n,i,o,u);if(!Qt(t))throw new TypeError(ar("invalid argument. First argument must be a supported ndarray data type. Value: `%s`.",t));if(!p(e))throw new TypeError(ar("invalid argument. Second argument must be an array-like object, typed-array-like, or a Buffer. Value: `%s`.",e));if(e.get&&e.set&&(!lt(e.get)||!lt(e.set)))throw new TypeError(ar("invalid argument. Second argument `get` and `set` properties must be functions. Value: `%s`.",e));if(!F(r)&&(!p(r)||r.length>0))throw new TypeError(ar("invalid argument. Third argument must be an array-like object containing nonnegative integers. Value: `%s`.",r));if((a=r.length)>32767)throw new RangeError(ar("invalid argument. Number of dimensions must not exceed %u due to stack limits. Value: `%u`.",32767,a));if(!D(n))throw new TypeError(ar("invalid argument. Fourth argument must be an array-like object containing integers. Value: `%s`.",n));if(a>0){if(n.length!==a)throw new RangeError(ar("invalid argument. Fourth argument length must match the number of dimensions. Expected number of dimensions: `%u`. Strides length: `%u`.",a,n.length))}else{if(1!==n.length)throw new RangeError("invalid argument. Fourth argument length must be equal to 1 when creating a zero-dimensional ndarray.");if(0!==n[0])throw new RangeError(ar("invalid argument. Fourth argument must contain a single element equal to 0. Value: `%d`.",n[0]))}if(!V(i))throw new TypeError(ar("0Mp5v",i));if(!mt(o))throw new TypeError(ar("invalid argument. Sixth argument must be a supported order. Value: `%s`.",o));if(a>0&&!te(e.length,r,n,i)&&ee(r)>0)throw new Error("invalid arguments. Input buffer is incompatible with the specified meta data. Ensure that the offset is valid with regard to the strides array and that the buffer has enough elements to satisfy the desired array shape.");if((f={}).mode=fr,f.readonly=sr,arguments.length>6&&(s=Or(f,u)))throw s;return this._mode=f.mode,void 0===f.submode&&(f.submode=[this._mode]),this._submode=f.submode,c=pr(r,a),l=pr(n,a||1),rr.call(this,t,e,c,l,i,o),this._flags.READONLY=f.readonly,this}!function(t,e){var r=nr(t);if(r)throw r;if(r=nr(e))throw r;if(void 0===e.prototype)throw new TypeError("invalid argument. Second argument must have a prototype from which another object can inherit. Value: `"+e.prototype+"`.");t.prototype=ur(e.prototype),s(t.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:t})}(Er,rr),c(Er,"name","ndarray"),c(Er.prototype,"get",(function(){var t,e,r,n;if(arguments.length!==this._ndims)throw new RangeError(ar("invalid arguments. Number of indices must match the number of dimensions. ndims: `%u`. nargs: `%u`.",this._ndims,arguments.length));for(t=this._offset,r=this._submode.length,n=0;n<arguments.length;n++){if(!N(arguments[n]))throw new TypeError(ar("invalid argument. Indices must be integer valued. Argument: `%u`. Value: `%s`.",n,arguments[n]));e=cr(arguments[n],this._shape[n]-1,this._submode[n%r]),t+=this._strides[n]*e}return this._accessors?this._buffer.get(t):this._buffer[t]})),c(Er.prototype,"iget",(function(t){if(this._ndims>0){if(!N(t))throw new TypeError(ar("invalid argument. Index must be an integer. Value: `%s`.",t));return t=cr(t,this._length-1,this._mode),lr.call(this,t)}return lr.call(this)})),c(Er.prototype,"set",(function(){var t,e,r,n;if(this._flags.READONLY)throw new Error(ar("0Mp0e"));if(arguments.length!==this._ndims+1)throw new RangeError(ar("invalid arguments. Number of indices must match the number of dimensions. ndims: `%u`. nargs: `%u`.",this._ndims,arguments.length));for(t=this._offset,r=this._submode.length,n=0;n<arguments.length-1;n++){if(!N(arguments[n]))throw new TypeError(ar("0Mp5n",n,arguments[n]));e=cr(arguments[n],this._shape[n]-1,this._submode[n%r]),t+=this._strides[n]*e}return this._accessors?this._buffer.set(arguments[n],t):this._buffer[t]=arguments[n],this})),c(Er.prototype,"iset",(function(t,e){if(this._flags.READONLY)throw new Error(ar("0Mp0e"));if(this._ndims>0){if(!N(t))throw new TypeError(ar("invalid argument. Index must be an integer. Value: `%s`.",t));t=cr(t,this._length-1,this._mode),hr.call(this,t,e)}else hr.call(this,t);return this}));export{Er as default};
//# sourceMappingURL=mod.js.map
