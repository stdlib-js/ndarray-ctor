// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer-array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-order@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-buffer-length-compatible@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ind@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-index-mode@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";var y={mode:"throw",readonly:!1},w=p.isPrimitive,E=g,_=u,x=h.prototype.iget;var T=function(e){if(this._ndims>0){if(!w(e))throw new TypeError(_("invalid argument. Index must be an integer. Value: `%s`.",e));return e=E(e,this._length-1,this._mode),x.call(this,e)}return x.call(this)},V=p.isPrimitive,M=g,R=u,N=h.prototype.iset;var P=function(e,t){if(this._flags.READONLY)throw new Error(R("0Mp0e"));if(this._ndims>0){if(!V(e))throw new TypeError(R("invalid argument. Index must be an integer. Value: `%s`.",e));e=M(e,this._length-1,this._mode),N.call(this,e,t)}else N.call(this,e);return this},k=p.isPrimitive,F=g,A=u;var I=function(){var e,t,r,s;if(arguments.length!==this._ndims)throw new RangeError(A("invalid arguments. Number of indices must match the number of dimensions. ndims: `%u`. nargs: `%u`.",this._ndims,arguments.length));for(e=this._offset,r=this._submode.length,s=0;s<arguments.length;s++){if(!k(arguments[s]))throw new TypeError(A("invalid argument. Indices must be integer valued. Argument: `%u`. Value: `%s`.",s,arguments[s]));t=F(arguments[s],this._shape[s]-1,this._submode[s%r]),e+=this._strides[s]*t}return this._accessors?this._buffer.get(e):this._buffer[e]},O=p.isPrimitive,S=g,D=u;var L=function(){var e,t,r,s;if(this._flags.READONLY)throw new Error(D("0Mp0e"));if(arguments.length!==this._ndims+1)throw new RangeError(D("invalid arguments. Number of indices must match the number of dimensions. ndims: `%u`. nargs: `%u`.",this._ndims,arguments.length));for(e=this._offset,r=this._submode.length,s=0;s<arguments.length-1;s++){if(!O(arguments[s]))throw new TypeError(D("0Mp5n",s,arguments[s]));t=S(arguments[s],this._shape[s]-1,this._submode[s%r]),e+=this._strides[s]*t}return this._accessors?this._buffer.set(arguments[s],e):this._buffer[e]=arguments[s],this};var Y=function(e,t){var r,s;for(r=[],s=0;s<t;s++)r.push(e[s]);return r},q=f,z=b,B=c,C=j,G=v.isPrimitive,H=u;var J=function(e,t){var r;if(!q(t))return new TypeError(H("0Mp2h",t));if(z(t,"mode")&&(e.mode=t.mode,!C(e.mode)))return new TypeError(H("0Mp5o","mode",e.mode));if(z(t,"submode")){if(e.submode=t.submode,!B(e.submode))return new TypeError(H("0Mp5p","submode",e.submode));if(0===e.submode.length)return new TypeError(H("0Mp5p","submode",e.submode.join(",")));for(r=0;r<e.submode.length;r++)if(!C(e.submode[r]))return new TypeError(H("invalid option. Each submode must be a recognized mode. Option: `%s`.",e.submode[r]));e.submode=e.submode.slice()}return z(t,"readonly")&&(e.readonly=t.readonly,!G(e.readonly))?new TypeError(H("0Mp30","readonly",e.readonly)):null},K=e,Q=t,U=r.primitives,W=s.isPrimitive,X=i.primitives,Z=n,$=o,ee=d,te=a,re=m,se=h,ie=u,ne=y,oe=T,de=P,ae=I,me=L,he=Y,le=J;function ue(e,t,r,s,i,n,o){var d,a,m,h,l;if(!(this instanceof ue))return arguments.length<7?new ue(e,t,r,s,i,n):new ue(e,t,r,s,i,n,o);if(!ee(e))throw new TypeError(ie("invalid argument. First argument must be a supported ndarray data type. Value: `%s`.",e));if(!Q(t))throw new TypeError(ie("invalid argument. Second argument must be an array-like object, typed-array-like, or a Buffer. Value: `%s`.",t));if(t.get&&t.set&&(!Z(t.get)||!Z(t.set)))throw new TypeError(ie("invalid argument. Second argument `get` and `set` properties must be functions. Value: `%s`.",t));if(!U(r)&&(!Q(r)||r.length>0))throw new TypeError(ie("invalid argument. Third argument must be an array-like object containing nonnegative integers. Value: `%s`.",r));if((d=r.length)>32767)throw new RangeError(ie("invalid argument. Number of dimensions must not exceed %u due to stack limits. Value: `%u`.",32767,d));if(!X(s))throw new TypeError(ie("invalid argument. Fourth argument must be an array-like object containing integers. Value: `%s`.",s));if(d>0){if(s.length!==d)throw new RangeError(ie("invalid argument. Fourth argument length must match the number of dimensions. Expected number of dimensions: `%u`. Strides length: `%u`.",d,s.length))}else{if(1!==s.length)throw new RangeError("invalid argument. Fourth argument length must be equal to 1 when creating a zero-dimensional ndarray.");if(0!==s[0])throw new RangeError(ie("invalid argument. Fourth argument must contain a single element equal to 0. Value: `%d`.",s[0]))}if(!W(i))throw new TypeError(ie("0Mp5v",i));if(!$(n))throw new TypeError(ie("invalid argument. Sixth argument must be a supported order. Value: `%s`.",n));if(d>0&&!te(t.length,r,s,i)&&re(r)>0)throw new Error("invalid arguments. Input buffer is incompatible with the specified meta data. Ensure that the offset is valid with regard to the strides array and that the buffer has enough elements to satisfy the desired array shape.");if((a={}).mode=ne.mode,a.readonly=ne.readonly,arguments.length>6&&(m=le(a,o)))throw m;return this._mode=a.mode,void 0===a.submode&&(a.submode=[this._mode]),this._submode=a.submode,h=he(r,d),l=he(s,d||1),se.call(this,e,t,h,l,i,n),this._flags.READONLY=a.readonly,this}l(ue,se),K(ue,"name","ndarray"),K(ue.prototype,"get",ae),K(ue.prototype,"iget",oe),K(ue.prototype,"set",me),K(ue.prototype,"iset",de);var pe=ue;export{pe as default};
//# sourceMappingURL=index.mjs.map
