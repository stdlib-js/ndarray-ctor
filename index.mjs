// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer-array@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-order@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-buffer-length-compatible@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ctor@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ind@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-index-mode@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";var y={mode:"throw",readonly:!1},w=g.isPrimitive,E=p,_=h,x=l.prototype.iget;var T=function(e){if(this._ndims>0){if(!w(e))throw new TypeError(_("invalid argument. Index must be an integer value. Value: `%s`.",e));return e=E(e,this._length-1,this._mode),x.call(this,e)}return x.call(this)},V=g.isPrimitive,O=p,R=h,N=l.prototype.iset;var P=function(e,t){if(this._flags.READONLY)throw new Error("invalid invocation. Cannot write to a read-only array.");if(this._ndims>0){if(!V(e))throw new TypeError(R("invalid argument. Index must be an integer value. Value: `%s`.",e));e=O(e,this._length-1,this._mode),N.call(this,e,t)}else N.call(this,e);return this},k=g.isPrimitive,z=p,A=h;var I=function(){var e,t,r,i;if(arguments.length!==this._ndims)throw new RangeError(A("invalid arguments. Number of indices must match the number of dimensions. ndims: %u. nargs: %u.",this._ndims,arguments.length));for(e=this._offset,r=this._submode.length,i=0;i<arguments.length;i++){if(!k(arguments[i]))throw new TypeError(A("invalid argument. Indices must be integer valued. Argument: %u. Value: `%s`.",i,arguments[i]));t=z(arguments[i],this._shape[i]-1,this._submode[i%r]),e+=this._strides[i]*t}return this._accessors?this._buffer.get(e):this._buffer[e]},D=g.isPrimitive,L=p,Y=h;var q=function(){var e,t,r,i;if(this._flags.READONLY)throw new Error("invalid invocation. Cannot write to a read-only array.");if(arguments.length!==this._ndims+1)throw new RangeError(Y("invalid arguments. Number of indices must match the number of dimensions. ndims: %u. nargs: %u.",this._ndims,arguments.length));for(e=this._offset,r=this._submode.length,i=0;i<arguments.length-1;i++){if(!D(arguments[i]))throw new TypeError(Y("invalid argument. Indices must be integer valued. Argument: `%i`. Value: `%u`.",i,arguments[i]));t=L(arguments[i],this._shape[i]-1,this._submode[i%r]),e+=this._strides[i]*t}return this._accessors?this._buffer.set(arguments[i],e):this._buffer[e]=arguments[i],this};var C=function(e,t){var r,i;for(r=[],i=0;i<t;i++)r.push(e[i]);return r},B=f,S=b,F=v,G=c,H=j.isPrimitive,J=h;var K=function(e,t){var r;if(!B(t))return new TypeError(J("invalid argument. Options argument must be an object. Value: `%s`.",t));if(S(t,"mode")&&(e.mode=t.mode,!G(e.mode)))return new TypeError(J("invalid option. `%s` option must be a recognized mode. Option: `%s`.","mode",e.mode));if(S(t,"submode")){if(e.submode=t.submode,!F(e.submode))return new TypeError(J("invalid option. `%s` option must be an array containing recognized modes. Option: `%s`.","submode",e.submode));if(0===e.submode.length)return new TypeError(J("invalid option. `submode` option must be an array containing recognized modes. Option: `%s`.",e.submode.join(",")));for(r=0;r<e.submode.length;r++)if(!G(e.submode[r]))return new TypeError(J("invalid option. Each `submode` must be a recognized mode. Option: `%s`.",e.submode[r]));e.submode=e.submode.slice()}return S(t,"readonly")&&(e.readonly=t.readonly,!H(e.readonly))?new TypeError(J("invalid option. `%s` option must be a boolean. Option: `%s`.","readonly",e.readonly)):null},M=e,Q=t,U=r.primitives,W=i.isPrimitive,X=s.primitives,Z=n,$=o,ee=a,te=d,re=m,ie=l,se=h,ne=y,oe=T,ae=P,de=I,me=q,le=C,ue=K;function he(e,t,r,i,s,n,o){var a,d,m,l,u;if(!(this instanceof he))return arguments.length<7?new he(e,t,r,i,s,n):new he(e,t,r,i,s,n,o);if(!ee(e))throw new TypeError(se("invalid argument. `dtype` argument must be a supported ndarray data type. Value: `%s`.",e));if(!Q(t))throw new TypeError(se("invalid argument. `buffer` argument must be an array-like object, typed-array-like, or a Buffer. Value: `%s`.",t));if(t.get&&t.set&&(!Z(t.get)||!Z(t.set)))throw new TypeError(se("invalid argument. `buffer` argument `get` and `set` properties must be functions. Value: `%s`.",t));if(!U(r)&&(!Q(r)||r.length>0))throw new TypeError(se("invalid argument. `shape` argument must be an array-like object containing nonnegative integers. Value: `%s`.",r));if((a=r.length)>32767)throw new RangeError(se("invalid argument. Number of dimensions must not exceed `%u` due to stack limits. Value: `%u`.",32767,a));if(!X(i))throw new TypeError(se("invalid argument. `strides` argument must be an array-like object containing integers. Value: `%s`.",i));if(a>0){if(i.length!==a)throw new RangeError(se("invalid argument. `strides` argument length must match the number of dimensions. Expected number of dimensions: `%u`. Strides length: `%u`.",a,i.length))}else{if(1!==i.length)throw new RangeError("invalid argument. `strides` length must be equal to 1 when creating a zero-dimensional ndarray.");if(0!==i[0])throw new RangeError(se("invalid argument. `strides` argument must contain a single element equal to `0`. Value: `%d`.",i[0]))}if(!W(s))throw new TypeError(se("invalid argument. `offset` argument must be a nonnegative integer. Value: `%s`.",s));if(!$(n))throw new TypeError(se("invalid argument. `order` argument must be a supported order. Value: `%s`.",n));if(a>0&&!te(t.length,r,i,s)&&re(r)>0)throw new Error("invalid arguments. The input buffer is incompatible with the specified meta data. Ensure that the offset is valid with regard to the strides array and that the buffer has enough elements to satisfy the desired array shape.");if((d={}).mode=ne.mode,d.readonly=ne.readonly,arguments.length>6&&(m=ue(d,o)))throw m;return this._mode=d.mode,void 0===d.submode&&(d.submode=[this._mode]),this._submode=d.submode,l=le(r,a),u=le(i,a||1),ie.call(this,e,t,l,u,s,n),this._flags.READONLY=d.readonly,this}u(he,ie),M(he,"name","ndarray"),M(he.prototype,"get",de),M(he.prototype,"iget",oe),M(he.prototype,"set",me),M(he.prototype,"iset",ae);var ge=he;export{ge as default};
//# sourceMappingURL=index.mjs.map
